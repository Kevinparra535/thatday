<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="favicon.svg" type="image/x-icon" />
    <link rel="stylesheet" href="./src/css/index.css" />
    <title>Under The Stars</title>
  </head>
  <body>
    <header class="header">
      <nav class="nav">
        <a class="nav__logo">
          <img src="./src/img/logo.svg" alt="logo" />
          <h1>Under The Stars</h1>
        </a>
      </nav>
    </header>
    <main id="root"></main>

    <section class="hero">
      <div class="hero__container">
        <h1>
          Regala el mapa estelar que presenció ese momento espacial e
          inolvidable.
        </h1>
        <button>Crea tú diseño</button>
      </div>
    </section>

    <section class="about">
      <div class="about__info">
        <h2>"Somos estrellas nadando en el mar de lo infinito"</h2>
        <p>
          Crea hermosas cartas estelares que representan la alineación única de
          las estrellas en el lugar y el momento que tú elijas.
          <b
            >cumpleaños, una pedida de mano, una boda, cuando os
            conocisteis...</b
          >
          Las estrellas siempre están en una posición diferente.
          <br />
          <br />
          La precisión científica de nuestros mapas es verificada de manera
          independiente para ayudarte a huir de cartas estelares falsas o de
          origen incierto. Lorem ipsum dolor, sit amet consectetur adipisicing
          elit. In, quos molestiae! In facilis ducimus, necessitatibus libero
          voluptas expedita totam rem minus, dicta, quia nulla velit aut
          dignissimos obcaecati ea tempora.
        </p>
      </div>
      <div class="about__designs">

      </div>
    </section>

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&family=Quicksand:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/r11/Stats.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/r11/Stats.js"></script>
    <script src="./three.min.js"></script>
    <script>
      (function () {
        "use strict";
        /* 	'To actually be able to display anything with Three.js, we need three things:
		A scene, a camera, and a renderer so we can render the scene with the camera.' 
	   		
	   		- https://threejs.org/docs/#Manual/Introduction/Creating_a_scene 		*/

        var scene, camera, renderer;

        /* We need this stuff too */
        var container,
          aspectRatio,
          HEIGHT,
          WIDTH,
          fieldOfView,
          nearPlane,
          farPlane,
          mouseX,
          mouseY,
          windowHalfX,
          windowHalfY,
          geometry,
          starStuff,
          materialOptions,
          stars;

        init();
        animate();

        function init() {
          container = document.getElementById("root");
          document.body.appendChild(container);

          HEIGHT = window.innerHeight;
          WIDTH = window.innerWidth;
          aspectRatio = WIDTH / HEIGHT;
          fieldOfView = 75;
          nearPlane = 1;
          farPlane = 1000;
          mouseX = 0;
          mouseY = 0;

          windowHalfX = WIDTH / 2;
          windowHalfY = HEIGHT / 2;

          camera = new THREE.PerspectiveCamera(
            fieldOfView,
            aspectRatio,
            nearPlane,
            farPlane
          );

          //Z positioning of camera

          camera.position.z = farPlane / 2;

          scene = new THREE.Scene({ antialias: true });
          scene.fog = new THREE.FogExp2(0x000000, 0.0003);

          // The wizard's about to get busy.
          starForge();

          //check for browser Support
          if (webGLSupport()) {
            //yeah?  Right on...
            renderer = new THREE.WebGLRenderer({ alpha: true });
          } else {
            //No?  Well that's okay.
            renderer = new THREE.CanvasRenderer();
          }

          renderer.setClearColor(0x000011, 1);
          renderer.setPixelRatio(window.devicePixelRatio);
          renderer.setSize(WIDTH, HEIGHT);
          container.appendChild(renderer.domElement);

          window.addEventListener("resize", onWindowResize, false);
          document.addEventListener("mousemove", onMouseMove, false);
        }

        function animate() {
          requestAnimationFrame(animate);
          render();
        }

        function render() {
          camera.position.x += (mouseX - camera.position.x) * 0.005;
          camera.position.y += (-mouseY - camera.position.y) * 0.005;
          camera.lookAt(scene.position);
          renderer.render(scene, camera);
        }

        function webGLSupport() {
          /* 	The wizard of webGL only bestows his gifts of power
			to the worthy.  In this case, users with browsers who 'get it'.		*/

          try {
            var canvas = document.createElement("canvas");
            return !!(
              window.WebGLRenderingContext &&
              (canvas.getContext("webgl") ||
                canvas.getContext("experimental-webgl"))
            );
          } catch (e) {
            // console.warn('Hey bro, for some reason we\'re not able to use webGL for this.  No biggie, we\'ll use canvas.');
            return false;
          }
        }

        function onWindowResize() {
          // Everything should resize nicely if it needs to!
          var WIDTH = window.innerWidth,
            HEIGHT = window.innerHeight;

          camera.aspect = aspectRatio;
          camera.updateProjectionMatrix();
          renderer.setSize(WIDTH, HEIGHT);
        }

        function starForge() {
          /* 	Yep, it's a Star Wars: Knights of the Old Republic reference,
			are you really surprised at this point? 
													*/
          var starQty = 45000;
          geometry = new THREE.SphereGeometry(1000, 100, 50);

          materialOptions = {
            size: 1.0, //I know this is the default, it's for you.  Play with it if you want.
            transparency: true,
            opacity: 0.7,
          };

          starStuff = new THREE.PointCloudMaterial(materialOptions);

          // The wizard gaze became stern, his jaw set, he creates the cosmos with a wave of his arms

          for (var i = 0; i < starQty; i++) {
            var starVertex = new THREE.Vector3();
            starVertex.x = Math.random() * 2000 - 1000;
            starVertex.y = Math.random() * 2000 - 1000;
            starVertex.z = Math.random() * 2000 - 1000;

            geometry.vertices.push(starVertex);
          }

          stars = new THREE.PointCloud(geometry, starStuff);
          scene.add(stars);
        }

        function onMouseMove(e) {
          mouseX = e.clientX - windowHalfX;
          mouseY = e.clientY - windowHalfY;
        }
      })();
    </script>
  </body>
</html>
